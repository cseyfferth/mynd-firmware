SET(DRIVERS_COMPONENTS ad82128 bq24610 bq78350 buttons cs43l22 ep91a6s ep91a7e ep950e es8156 et6416y ht1635
    is31fl3206 is31fl323xa is31fl3216 is31fl3236 pcm1681 regulator sunplus tas5805 tca9555 tm1680)

SET(DRIVERS_PICKED_COMPONENTS "")

SET(DRIVERS_PREFIX "")

SET(DRIVERS_PATH ${CMAKE_SOURCE_DIR}/drivers/components)

IF(NOT ${DRIVERS_REQUIRED_COMPONENTS})
    MESSAGE(FATAL_ERROR "Unknown DRIVERS component: empty list")
ENDIF()

# Check if these components supported
FOREACH(cmp ${DRIVERS_FIND_COMPONENTS})
    IF(NOT (${cmp} IN_LIST DRIVERS_COMPONENTS))
        MESSAGE(FATAL_ERROR "Unknown DRIVERS component: ${cmp}. Available components: ${DRIVERS_COMPONENTS}")
    ENDIF()
ENDFOREACH()

# Add all components into desired list of components
FOREACH(cmp ${DRIVERS_FIND_COMPONENTS})
    IF(NOT (${cmp} IN_LIST DRIVERS_PICKED_COMPONENTS))
        LIST(APPEND DRIVERS_PICKED_COMPONENTS ${cmp})
    ENDIF()
ENDFOREACH()

SET(DRIVERS_SOURCES "")
SET(DRIVERS_INCLUDE_DIR "")

# Add basic include
LIST(APPEND DRIVERS_INCLUDE_DIR ${CMAKE_SOURCE_DIR}/drivers)

IF("ad82128" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/ad82128/ad82128.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/ad82128)
ENDIF()

IF("cs43l22" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/cs43l22/cs43l22.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/cs43l22)
ENDIF()

IF("ht1635" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/ht1635/ht1635.c)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/ht1635/display_ht1635.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/ht1635)
ENDIF()

IF("tm1680" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/tm1680/tm1680.c)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/tm1680/display_tm1680.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/tm1680)
ENDIF()

IF("buttons" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/buttons/buttons.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/buttons)
ENDIF()

IF("sunplus" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/sunplus/commands/sunplus_commands.c)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/sunplus/driver/sunplus_driver.c)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/sunplus/protocol/sunplus_protocol_ll.c)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/sunplus/protocol/sunplus_protocol_ul.c)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/sunplus/utils/sunplus_utils.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/sunplus)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/sunplus/commands)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/sunplus/driver)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/sunplus/protocol)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/sunplus/utils)
ENDIF()

IF("ep91a6s" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/ep91a6s/ep91a6s.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/ep91a6s)
ENDIF()

IF("ep950e" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/ep950e/ep950e.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/ep950e)
ENDIF()

IF("ep91a7e" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/ep91a7e/ep91a7e.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/ep91a7e)
ENDIF()

IF("es8156" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/es8156/es8156.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/es8156)
ENDIF()

IF("et6416y" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/et6416y/et6416y.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/et6416y)
ENDIF()

IF("is31fl3206" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/is31fl3206/is31fl3206.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/is31fl3206)
ENDIF()

IF("is31fl323xa" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/is31fl323xa/is31fl323xa.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/is31fl323xa)
ENDIF()

IF("is31fl3216" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/is31fl3216/is31fl3216.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/is31fl3216)
ENDIF()

IF("is31fl3236" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/is31fl3236/is31fl3236.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/is31fl3236)
ENDIF()

IF("bq78350" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/bq78350/bq78350.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/bq78350)
ENDIF()

IF("bq24610" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/bq24610/bq24610.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/bq24610)
ENDIF()

IF("pcm1681" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/pcm1681/pcm1681.c)
    LIST(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/pcm1681)
ENDIF()

if("tca9555" IN_LIST DRIVERS_PICKED_COMPONENTS)
    list(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/tca9555/tca9555.c)
    list(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/tca9555)
endif()

if("tas5805" IN_LIST DRIVERS_PICKED_COMPONENTS)
    list(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/tas5805/tas5805.c)
    list(APPEND DRIVERS_INCLUDE_DIR ${DRIVERS_PATH}/tas5805)
endif()

if("regulator" IN_LIST DRIVERS_PICKED_COMPONENTS)
    LIST(APPEND DRIVERS_SOURCES ${DRIVERS_PATH}/../regulator/regulator.c)
endif()

INCLUDE(FindPackageHandleStandardArgs)

FIND_PACKAGE_HANDLE_STANDARD_ARGS(DRIVERS DEFAULT_MSG DRIVERS_INCLUDE_DIR DRIVERS_SOURCES)
